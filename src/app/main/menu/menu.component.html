<div>
    <div class="mat-elevation-z8">
        <div style="display:flex; align-items:center; padding: 16px 24px 0px 24px"
            [ngStyle]="{'padding-bottom': deviceFormat === 'mobile' ? '16px' : '0px', 'justify-content':deviceFormat === 'mobile' ? 'space-between' : ''}">
            <button mat-fab style="background:#321937; color:white" (click)="toggleSideMenu()"
                *ngIf="deviceFormat === 'mobile'">
                <mat-icon>menu</mat-icon>
            </button>

            <img src="../../../assets/images/logo.png" alt="logo interiores" style="height:8vh">
            <span class="ms-fill" *ngIf="deviceFormat !== 'mobile'"></span>
            <button mat-button class="mat-subheading-1" style="margin:0px; border:1px solid #321937; border-radius:10px"
                [matMenuTriggerFor]="accountMenu" *ngIf="deviceFormat !== 'mobile'">
                <mat-icon class="ms-icons-color" style="vertical-align:middle">account_circle</mat-icon>
                {{auth.userInteriores ? auth.userInteriores.displayName : '---'}}
                <mat-icon class="ms-icons-color" style="vertical-align:middle">keyboard_arrow_down</mat-icon>
            </button>
            <button mat-button class="mat-subheading-1" style="margin:0px; border:1px solid #321937; border-radius:10px"
                [matMenuTriggerFor]="accountMenu" *ngIf="deviceFormat === 'mobile'">
                <mat-icon class="ms-icons-color" style="vertical-align:middle">account_circle</mat-icon>
                <mat-icon class="ms-icons-color" style="vertical-align:middle">keyboard_arrow_down</mat-icon>
            </button>
            <mat-menu #accountMenu="matMenu">
                <button mat-menu-item *ngIf="deviceFormat === 'mobile'" disabled>
                    <mat-icon>account_circle</mat-icon>
                    {{auth.userInteriores ? auth.userInteriores.displayName : '---'}}
                </button>
                <button mat-menu-item>
                    <mat-icon>settings</mat-icon> Configuración
                </button>
                <button mat-menu-item>
                    <mat-icon>vpn_key</mat-icon> Cambiar clave
                </button>
                <button mat-menu-item (click)="auth.signOut()">
                    <mat-icon>eject</mat-icon> Cerrar sesión
                </button>
                <button mat-menu-item>
                    <mat-icon>info</mat-icon> Ayuda
                </button>
                <button mat-menu-item disabled>version 1.0b</button>
            </mat-menu>
        </div>

        <mat-tab-group dynamicHeight *ngIf="deviceFormat === 'web' || deviceFormat === 'tablet'"
            [selectedIndex]="selectedTab.value" (selectedIndexChange)="selectedTab.setValue($event)">
            <mat-tab label="Ventas" [disabled]="!permits.salesSection">
                <div class="w3-padding w3-border-bottom w3-border-lightgray">
                    <div style="display:flex">
                        <div class="w3-margin-right">
                            <button mat-button class="w3-small"
                                [ngClass]="{'ms-button-selected': buttonOptions.sales.requirements}"
                                routerLink="sales/requirements/form" [disabled]="!permits.salesRequirementsButton">
                                <mat-icon class="ms-icons-color">assignment</mat-icon> Requerimientos
                            </button><br>
                            <button mat-button class="w3-small"
                                [ngClass]="{'ms-button-selected': buttonOptions.sales.orders}"
                                routerLink="sales/orders/form" [disabled]="!permits.salesOrdersButton">
                                <mat-icon class="ms-icons-color">assignment</mat-icon> Pedidos
                            </button><br>
                        </div>
                        <div class="w3-border-left w3-border-lightgray w3-margin-right">
                            <button mat-button class="w3-small"
                                [ngClass]="{'ms-button-selected': buttonOptions.sales.sales}"
                                routerLink="sales/shopping" [disabled]="!permits.salesShoppingButton">
                                <mat-icon class="ms-icons-color">shopping_cart</mat-icon> Ventas
                            </button><br>
                            <button mat-button class="w3-small"
                                [ngClass]="{'ms-button-selected': buttonOptions.sales.stores}" routerLink="sales/stores"
                                [disabled]="!permits.salesStoresButton">
                                <mat-icon class="ms-icons-color">store</mat-icon> Tiendas
                            </button><br>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Producción" [disabled]="!permits.productionSection">
                <div class="w3-padding  w3-border-bottom w3-border-lightgray">
                    <div style="display:flex">
                        <div>
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.production.requirements}"
                                routerLink="production/requirements" [disabled]="!permits.productionRequirementsButton">
                                <mat-icon class="ms-icons-color">assignment</mat-icon> Requerimientos
                            </button><br>
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.production.orders}"
                                routerLink="production/orders" [disabled]="!permits.productionOrdersButton">
                                <mat-icon class="ms-icons-color">assignment</mat-icon> Pedidos
                            </button><br>
                        </div>
                        <div class="w3-margin-right">
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.production.production}"
                                routerLink="production/production"
                                [disabled]="!permits.productionProductionOrdersButton">
                                <mat-icon class="ms-icons-color">build</mat-icon> Producción
                            </button><br>
                        </div>
                        <div class="w3-border-left w3-border-lightgray w3-margin-right">
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.production.materials}"
                                routerLink="production/raw-material" [disabled]="!permits.productionRawMaterialsButton">
                                <mat-icon class="ms-icons-color">view_module</mat-icon> Materia prima
                            </button><br>
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.production.finishedProducts}"
                                routerLink="production/finished-products"
                                [disabled]="!permits.productionFinishedProductsButton">
                                <mat-icon class="ms-icons-color">local_offer</mat-icon> Productos acabados
                            </button><br>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Logística" [disabled]="!permits.logisticSection">
                <div class="w3-padding  w3-border-bottom w3-border-lightgray">
                    <div style="display:flex">
                        <div>
                            <button class="w3-small" mat-button
                                [ngClass]="{'ms-button-selected': buttonOptions.logistic.transfers}"
                                routerLink="logistic/transfers" [disabled]="!permits.logisticTransfersButton">
                                <mat-icon class="ms-icons-color">local_shipping</mat-icon> Translados
                            </button><br>
                        </div>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
    <mat-progress-bar mode="indeterminate" *ngIf="loadingRouteConfig"></mat-progress-bar>

    <router-outlet *ngIf="deviceFormat === 'web' || deviceFormat === 'tablet'">
    </router-outlet>


    <mat-sidenav-container *ngIf="deviceFormat === 'mobile'">
        <mat-sidenav mode="over" #sideMenu [(opened)]="openedMenu" class="mat-elevation-z8">
            <div>
                <mat-expansion-panel *ngIf="true" style="width:15em; box-shadow:none; border-radius:0px 0px 0px 0px"
                    class="w3-border-top w3-border-light-grey" [ngClass]="{'ms-expansion-panel-menu':salesOpenedFlag}"
                    (opened)="salesOpened()" (closed)="salesClosed()">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-weight:500"
                            [ngClass]="{'ms-expansion-panel-title':salesOpenedFlag}">
                            <mat-icon style="vertical-align:middle; margin-right:0.3em">shopping_cart</mat-icon>
                            Ventas
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="sales/requirements/form" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">assignment
                        </mat-icon> Requerimiento
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="sales/orders/form" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">
                            assignment_turned_in
                        </mat-icon> Pedidos
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="sales/sales" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()" disabled>
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">shopping_cart
                        </mat-icon> Ventas
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="sales/stores"
                        style="text-align:left;border-radius:0px 0px 0px 0px;padding-bottom:1em"
                        (click)="toggleSideMenu()" disabled>
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">store
                        </mat-icon> Tiendas
                    </button>
                    <p class="w3-margin-bottom"></p>

                </mat-expansion-panel>
                <mat-expansion-panel *ngIf="true" style="width:15em; box-shadow:none; border-radius:0px 0px 0px 0px"
                    class="w3-border-top w3-border-light-grey" [ngClass]="{'ms-expansion-panel-menu':salesOpenedFlag}"
                    (opened)="salesOpened()" (closed)="salesClosed()">
                    <mat-expansion-panel-header>
                        <mat-panel-title style="font-weight:500"
                            [ngClass]="{'ms-expansion-panel-title':salesOpenedFlag}">
                            <mat-icon style="vertical-align:middle; margin-right:0.3em">build</mat-icon>
                            Producción
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="production/requirements" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">assignment
                        </mat-icon> Requerimiento
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="production/orders" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">
                            assignment_turned_in
                        </mat-icon> Pedidos
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="production/production" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">build
                        </mat-icon> Producción
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="production/raw-material" style="text-align:left;border-radius:0px 0px 0px 0px"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">view_module
                        </mat-icon> Materia prima
                    </button>
                    <button mat-button *ngIf="true"
                        class="w3-block w3-text-white ms-expansion-panel-menu w3-hover-text-purple"
                        routerLink="production/finished-products"
                        style="text-align:left;border-radius:0px 0px 0px 0px;padding-bottom:1em"
                        (click)="toggleSideMenu()">
                        <mat-icon style="vertical-align: middle; margin-right:0.2em;margin-left:1.5em">local_offer
                        </mat-icon> Productos acabados
                    </button>
                    <p class="w3-margin-bottom"></p>

                </mat-expansion-panel>
            </div>
        </mat-sidenav>
        <mat-sidenav-content style="min-height:82vh">
            <router-outlet></router-outlet>
        </mat-sidenav-content>
    </mat-sidenav-container>
</div>